cabal-list-available() {
  echo "Available versions:"
  for ver in $HOME/bin/cabal-*; do
    echo "  ${ver##$HOME/bin/cabal-}"
  done
}

# Switch to a specific cabal version
cabal-switch() {
  if [ -z "$1" ]; then
    echo "USAGE: cabal-switch VERSION"
    cabal-list-available
    return 1
  fi

  VER_PATH="$HOME/bin/cabal-$1"
  if [ -x "$VER_PATH" ]; then
    echo $VER_PATH
    ln -s "$VER_PATH" "$HOME/bin/cabal" -f
    export CABAL_VERSION=$1
    cabal --version
  else
    echo "CABAL $1 isn't available"
    cabal-list-available
    return 1
  fi
}

# Cycle cabal versions
c() {
  case $CABAL_VERSION in
    1.24.0.2)
      cabal-switch 2.0.0.1
      ;;
    *)
      cabal-switch 1.24.0.2
      ;;
  esac
}
